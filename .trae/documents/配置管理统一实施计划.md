# é…ç½®ç®¡ç†ç»Ÿä¸€å®æ–½è®¡åˆ’

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

ç»Ÿä¸€é…ç½®ç³»ç»Ÿï¼Œå°†æ‰€æœ‰æ–‡ä»¶ä»æ—§çš„ `config.py` è¿ç§»åˆ°æ–°çš„ `config_new.py`ï¼Œæ¶ˆé™¤é…ç½®æ··ä¹±ã€‚

## ğŸ” ç°çŠ¶åˆ†æ

### å½“å‰é…ç½®æ–‡ä»¶å¯¹æ¯”

| ç‰¹æ€§ | æ—§é…ç½® (config.py) | æ–°é…ç½® (config_new.py) |
|------|-------------------|----------------------|
| é…ç½®æ–¹å¼ | ç±»å±æ€§æ–¹å¼ | Pydantic BaseSettings |
| ç±»å‹éªŒè¯ | æ—  | è‡ªåŠ¨éªŒè¯ |
| LLM_TIMEOUT | âŒ ç¼ºå¤± | âœ… 300ç§’ |
| é…ç½®è·å– | ç›´æ¥è®¿é—®ç±»å±æ€§ | get_config() å‡½æ•° |
| é…ç½®éªŒè¯ | validate() ç±»æ–¹æ³• | validate_required_fields() |
| ç›®å½•åˆ›å»º | âŒ æ—  | âœ… _create_directories() |

### éœ€è¦è¿ç§»çš„æ–‡ä»¶ï¼ˆå…±18ä¸ªï¼‰

**æ ¸å¿ƒæ–‡ä»¶ï¼š**
- `backend/run.py` (1å¤„å¼•ç”¨)

**å·¥å…·å±‚ï¼š**
- `backend/app/utils/llm_client.py` (1å¤„å¼•ç”¨)

**æœåŠ¡å±‚ï¼ˆ11ä¸ªï¼‰ï¼š**
- `backend/app/services/simulation_runner.py`
- `backend/app/services/auto_pilot_manager.py`
- `backend/app/services/graph_builder.py`
- `backend/app/services/simulation_manager.py`
- `backend/app/services/zep_tools.py`
- `backend/app/services/export_service.py`
- `backend/app/services/zep_graph_memory_updater.py`
- `backend/app/services/zep_entity_reader.py`
- `backend/app/services/simulation_config_generator.py`
- `backend/app/services/report_agent.py`
- `backend/app/services/oasis_profile_generator.py`

**APIå±‚ï¼ˆ4ä¸ªï¼‰ï¼š**
- `backend/app/api/graph.py`
- `backend/app/api/simulation.py` (3å¤„å¼•ç”¨)
- `backend/app/api/report.py`

**æ¨¡å‹å±‚ï¼š**
- `backend/app/models/project.py` (1å¤„å¼•ç”¨)

## ğŸ“ å®æ–½æ­¥éª¤

### ç¬¬ä¸€é˜¶æ®µï¼šé…ç½®è¿ç§»

#### æ­¥éª¤ 1ï¼šä¿®æ”¹æ ¸å¿ƒå¯åŠ¨æ–‡ä»¶ `backend/run.py`
```python
# æ—§ä»£ç 
from app.config import Config
errors = Config.validate()
host = Config.DEBUG

# æ–°ä»£ç 
from app.config_new import get_config
errors = get_config().validate_required_fields()
host = get_config().DEBUG
```

#### æ­¥éª¤ 2ï¼šä¿®æ”¹å·¥å…·å±‚ `backend/app/utils/llm_client.py`
```python
# æ—§ä»£ç 
from ..config import Config
self.api_key = api_key or Config.LLM_API_KEY

# æ–°ä»£ç 
from ..config_new import get_config
config = get_config()
self.api_key = api_key or config.LLM_API_KEY
```

#### æ­¥éª¤ 3ï¼šæ‰¹é‡ä¿®æ”¹æœåŠ¡å±‚ï¼ˆ11ä¸ªæ–‡ä»¶ï¼‰
ç»Ÿä¸€æ›¿æ¢æ¨¡å¼ï¼š
- å¯¼å…¥ï¼š`from ..config import Config` â†’ `from ..config_new import get_config`
- ä½¿ç”¨ï¼š`Config.XXX` â†’ `get_config().XXX`

#### æ­¥éª¤ 4ï¼šæ‰¹é‡ä¿®æ”¹APIå±‚ï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰
åŒæ ·çš„æ›¿æ¢æ¨¡å¼ï¼Œç‰¹åˆ«æ³¨æ„ `simulation.py` ä¸­çš„3å¤„å¼•ç”¨ã€‚

#### æ­¥éª¤ 5ï¼šä¿®æ”¹æ¨¡å‹å±‚ `backend/app/models/project.py`
æ›¿æ¢å¯¼å…¥å’Œä½¿ç”¨æ–¹å¼ã€‚

### ç¬¬äºŒé˜¶æ®µï¼šæ¸…ç†æ—§é…ç½®

#### æ­¥éª¤ 6ï¼šåˆ é™¤æ—§é…ç½®æ–‡ä»¶
```bash
del backend/app/config.py
```

### ç¬¬ä¸‰é˜¶æ®µï¼šéªŒè¯æµ‹è¯•

#### æ­¥éª¤ 7ï¼šé…ç½®éªŒè¯
```bash
cd backend/app && python config_new.py
```

#### æ­¥éª¤ 8ï¼šåŠŸèƒ½æµ‹è¯•
- å¯åŠ¨åç«¯æœåŠ¡
- æµ‹è¯•æ–‡ä»¶ä¸Šä¼ 
- æµ‹è¯•æœ¬ä½“ç”Ÿæˆ
- æµ‹è¯•å›¾è°±æ„å»º
- æµ‹è¯•æ¨¡æ‹Ÿè¿è¡Œ
- æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é…ç½®è®¿é—®æ¨¡å¼å˜åŒ–**
   - æ—§ï¼š`Config.LLM_TIMEOUT`
   - æ–°ï¼š`get_config().LLM_TIMEOUT`

2. **é¿å…å¾ªç¯å¯¼å…¥**
   - åœ¨æ¨¡å—é¡¶éƒ¨å¯¼å…¥ `get_config`
   - åœ¨å‡½æ•°/æ–¹æ³•å†…éƒ¨è°ƒç”¨ `get_config()`

3. **é…ç½®å®Œæ•´æ€§**
   - `LLM_TIMEOUT` å·²åœ¨ `config_new.py` ä¸­å®šä¹‰ï¼ˆ300ç§’ï¼‰
   - æ‰€æœ‰æ—§é…ç½®é¡¹éƒ½å·²è¿ç§»

## âœ… å®Œæˆæ ‡å‡†

1. æ‰€æœ‰æ–‡ä»¶æˆåŠŸè¿ç§»åˆ° `config_new.py`
2. æ—§çš„ `config.py` å·²åˆ é™¤
3. åç«¯æœåŠ¡æ­£å¸¸å¯åŠ¨
4. æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡

## ğŸ“Š é¢„è®¡æ—¶é—´

- **é…ç½®è¿ç§»**ï¼š1-1.5å°æ—¶
- **æ¸…ç†æ—§é…ç½®**ï¼š15åˆ†é’Ÿ
- **éªŒè¯æµ‹è¯•**ï¼š45åˆ†é’Ÿ
- **æ€»è®¡**ï¼š2-2.5å°æ—¶