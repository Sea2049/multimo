# API 安全加固实施计划

## 实施步骤

### 第 1 步：添加认证系统（1.5 小时）
- 创建 `backend/app/api/auth.py` 实现 API Key 认证
- 在 `config_new.py` 添加认证配置
- 更新 `.env.example` 添加示例配置

### 第 2 步：实现请求限流（1.5 小时）
- 添加 Flask-Limiter 依赖
- 在 `__init__.py` 配置限流中间件
- 为不同端点配置分级限流策略

### 第 3 步：增强输入验证（1 小时）
- 扩展 validators.py 添加文件上传安全验证
- 为所有 API 端点添加数据验证
- 增强 SQL 注入和 XSS 防护

### 第 4 步：加固 CORS 配置（0.5 小时）
- 收紧 CORS_ORIGINS 配置
- 环境区分（开发/生产）
- 限制 HTTP 方法和请求头

### 第 5 步：添加安全响应头（0.5 小时）
- 添加 X-Content-Type-Options
- 添加 X-Frame-Options
- 添加 Content-Security-Policy

## 涉及文件

**新建：** `backend/app/api/auth.py`

**修改：** `backend/app/__init__.py`, `backend/app/config_new.py`, `backend/app/utils/validators.py`, `backend/requirements.txt`, `.env.example`, 3个 API 文件

## 预计总时间
6 小时